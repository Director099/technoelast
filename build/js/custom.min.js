!function(e){"function"==typeof define&&define.amd?define("custom",e):e()}(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){500<=window.pageYOffset?document.getElementById("to-top").classList.add("to-top--visible"):document.getElementById("to-top").classList.remove("to-top--visible")}document.getElementById("to-top")&&(document.getElementById("to-top").addEventListener("click",function(e){e.preventDefault();var i,s,r,o,t=window.pageYOffset,n=-1*+t;i=(e={duration:500,timing:function(e){return Math.pow(e,4)},draw:function(e){window.scrollTo(0,t+e*n)}}).timing,s=e.draw,r=e.duration,o=performance.now(),requestAnimationFrame(function e(t){var t=(t-o)/r,n=i(t=1<t?1:t);s(n),t<1&&requestAnimationFrame(e)})},!1),window.addEventListener("scroll",e),e())}),e=document.querySelectorAll(".field-file__input"),Array.prototype.forEach.call(e,function(e){var n=function(e,t){var n,i;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});e;){if((i=e.parentElement)&&i[n](t))return i;e=i}return null}(e,".field-file").querySelector(".field-file__name-text"),i=n.innerHTML;e.addEventListener("change",function(e){var t="",t=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop();n.innerHTML=t||i})});document.querySelectorAll(".js-collapse-click").forEach(e=>{e.addEventListener("click",function(){this.parentNode.classList.toggle("active");var e=this.nextElementSibling;e.style.height?e.style.height=null:e.style.height=e.scrollHeight+"px"})});var e=document.querySelectorAll(".js-field"),t=document.querySelectorAll(".field-text__btn-event"),n=document.querySelectorAll(".field-text__btn-password");function i(){""!==this.querySelector(".field-text__input").value?this.classList.add("focus"):this.classList.remove("focus")}function s(){var e=this.closest(".field-text").querySelector(".field-text__input");this.classList.toggle("field-text__btn-password--open"),this.classList.contains("field-text__btn-password--open")?e.type="text":e.type="password"}function r(){this.closest(".field-text").querySelector(".field-text__input").value=""}function o(e){var i=this;i.elem=e,this.f=!0,this.reg={Password:/^[\S]{8,}$/,Email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/},e.on("change","[data-required=1]",function(){$(this).removeClass("error")}),e.on("input","[data-required=1]",function(){i.addInvalid()||e.find(".form__warning").removeClass("d-none")}),this.addInvalid=function(e){e=$(e).closest(".field-text");e.removeClass("valid"),e.addClass("error"),i.f=!1},this.addValid=function(e){var t=$(e).closest(".field-text"),e=$(e).closest(".field-checkbox");t.addClass("valid"),t.removeClass("error"),e.removeClass("error")},this.isValid=function(){return i.f=!0,i.elem.find("[data-required=1]").each(function(e,t){var n;""==$(this).val()?i.addInvalid(t):"checkbox"!=$(this).attr("type")||$(this).prop("checked")?i.addValid(t):($(this).closest(".field-checkbox").addClass("error"),i.f=!1),t.classList.contains("js-calendar")&&!new Inputmask("99.99.9999",{alias:"datetime",placeholder:"",inputFormat:"dd.mm.yyyy",insertMode:!1,showMaskOnHover:!1,jitMasking:!0}).mask(document.querySelectorAll(".js-calendar")).isComplete()&&i.addInvalid(t),"tel"==t.type&&new Inputmask({mask:"+7 (999) 999 99 99",showMaskOnHover:!1}).mask(document.querySelectorAll("[type='tel']")),"password"==$(this).data("type")&&(n=$(this).val(),$(this).hasClass("js-check")&&n!==$(".js-input-elem").val()&&i.addInvalid(t),0==i.reg.Password.test(n))&&i.addInvalid(t),"file"==$(this).attr("type")&&(i.f=!0),"email"==$(this).data("type")&&(n=$(this).val(),0==i.reg.Email.test(n))&&i.addInvalid(t)}),i.f}}e.forEach(e=>{e.addEventListener("change",i)}),t.forEach(e=>{e.addEventListener("click",r)}),n.forEach(e=>{e.addEventListener("click",s)}),$(".js-form").each(function(){new o($(this))}),$(".js-form").on("submit",function(e){return!!new o($(this)).isValid()});class a{constructor(e,{btnNext:t,btnPrev:n,parentGroup:i,...s}){this.$el=e,(this._this=this)._parentGroup=this.$el.querySelectorAll(i),this._elemNext=this.$el.querySelectorAll(t),this._elemPrev=this.$el.querySelectorAll(n),this._STEP=0,this.options=s,this._init()}step(n=this._STEP){this._STEP=n,this._parentGroup.forEach((e,t)=>n===t?e.style=null:e.style.display="none")}stepNext(){this.options.onNextHandler?this.options.onNextHandler(this._parentGroup[this._STEP],e=>{e&&this.step(++this._STEP)}):this.step(++this._STEP)}stepPrev(){this.options.onPrevHandler?this.options.onPrevHandler(this._parentGroup[this._STEP],e=>{e&&this.step(--this._STEP)}):this.step(--this._STEP)}handleNext(){this._elemNext.forEach(e=>e.addEventListener("click",()=>this.stepNext()))}handlePrev(){this._elemPrev.forEach(e=>e.addEventListener("click",()=>this.stepPrev()))}_events(){this.handleNext(),this.handlePrev()}_init(){this.step(),this._events()}}function l(e){var t=e.querySelectorAll(".swiper-slide"),n={el:e.parentNode.querySelector(".swiper-pagination"),dynamicBullets:!0};return 1===t.length?(e.querySelector(".main-content__slide[href]")&&e.classList.add("hover-slide"),!1):n}$("[data-fancybox]").fancybox({touch:!1}),new Inputmask({mask:"+7 (X99) 999-9999",definitions:{X:{validator:"[1, 2, 3, 4, 5, 6, 9, 0]"}},showMaskOnHover:!1}).mask(document.querySelectorAll("[type='tel']"));var e=document.querySelector(".js-product-slider"),t=(e&&new Swiper(e,{mousewheel:{forceToAxis:!0},navigation:{nextEl:e.parentNode.querySelector(".swiper-button-next"),prevEl:e.parentNode.querySelector(".swiper-button-prev")},pagination:l(e)}),document.querySelector(".js-main-slider"));if(t){const f=t.querySelectorAll(".js-main-slider .swiper-slide");1<f.length?new Swiper(t,{mousewheel:{forceToAxis:!0},pagination:1!==(n=(n=t).querySelectorAll(".swiper-slide")).length&&!(window.matchMedia("(min-width: 1200px)").matches&&n.length<=3)&&{el:".swiper-pagination",dynamicBullets:!0},navigation:{nextEl:t.parentNode.querySelector(".swiper-button-next"),prevEl:t.parentNode.querySelector(".swiper-button-prev")},breakpoints:{1200:{slidesPerView:(e=f,n=3,e.length<n?f.length:3),spaceBetween:1}}}):(t.parentNode.querySelector(".swiper-button-next").classList.add("d-none"),t.parentNode.querySelector(".swiper-button-prev").classList.add("d-none"))}e=document.querySelectorAll(".js-company-slider");e&&e.forEach(e=>{new Swiper(e,{mousewheel:{forceToAxis:!0},navigation:{nextEl:e.parentNode.querySelector(".swiper-button-next"),prevEl:e.parentNode.querySelector(".swiper-button-prev")},spaceBetween:8,pagination:l(e)})});document.querySelectorAll(".js-auto-slider").forEach(function(e){c=new Swiper(e,{slidesPerView:"auto",mousewheel:{forceToAxis:!0},spaceBetween:8,navigation:{nextEl:e.parentNode.querySelector(".swiper-button-next"),prevEl:e.parentNode.querySelector(".swiper-button-prev")},breakpoints:{1200:{spaceBetween:12}}})});var c,n=document.querySelector(".js-personal-slider"),t=(n&&new Swiper(n,{slidesPerView:"auto",mousewheel:{forceToAxis:!0},navigation:{nextEl:n.parentNode.querySelector(".swiper-button-next"),prevEl:n.parentNode.querySelector(".swiper-button-prev")},spaceBetween:8,breakpoints:{1200:{spaceBetween:38}}}),document.querySelector(".nav-list__item--hover"));t&&(e=t.closest(".nav-list"),t.addEventListener("mouseover",function(){var e=this.querySelector(".nav-list__sub-item");e.style.display="block",e.style.height=e.scrollHeight+"px",this.classList.add("active"),this.style.height="auto"}),e.addEventListener("mouseleave",function(e){this.querySelector(".nav-list__sub-item").style.height=0}));const d=$("[data-btn-filter]"),u=$("[data-filter]"),h=$("[data-fancybox]"),p=(d.on("click",function(){const t=$(this).parents(".section-content__wrap");t.find(d).removeClass("active"),$(this).addClass("active"),t.find(u).attr("hidden",""),t.find(".tab-filter__btn.active").each(function(){var e;"all"===$(this).data("btn-filter")?(t.find(u).removeAttr("hidden"),t.find(h).attr("data-fancybox","all")):((e=$('[data-filter="'+$(this).data("btn-filter")+'"]')).removeAttr("hidden"),e.find(h).attr("data-fancybox",$(this).data("btn-filter"))),c.update})}),document.querySelectorAll(".js-desc-toggle").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();e=t.previousElementSibling;e.classList.toggle("active"),e.classList.contains("active")?t.textContent="Свернуть":t.textContent="Подробнее ›"})}),document.querySelectorAll(".js-char-clamp").forEach(e=>{var t=e.parentNode.querySelector(".js-desc-toggle"),e=e.querySelectorAll(".table-char__item").length;const n=8,i=3;window.matchMedia("(max-width: 1199px)").matches&&e<=n&&t.classList.add("d-none"),window.matchMedia("(min-width: 1200px)").matches&&e<=i&&t.classList.add("d-none")}),window.addEventListener("load",function(){var e=document.querySelectorAll(".js-line-clamp");if(0!==e.length)for(var t=0;t<e.length;t++){var n=e[t].parentNode.querySelector(".js-desc-toggle");e[t].offsetHeight<e[t].scrollHeight?n.classList.display="block":n.style.display="none"}}),document.querySelectorAll(".js-form-step").forEach(e=>{var t=e.querySelectorAll('[type="checkbox"], [type="radio"]');const n=new a(e,{parentGroup:".form__fieldset",btnNext:".js-form-next",btnPrev:".js-form-prev",onNextHandler:(e,t)=>{t(0!==e.querySelectorAll("input:checked").length)}});let i;t.forEach(e=>{e.addEventListener("click",e=>{var t,e=e.target.closest(".form__fieldset").querySelector(".js-form-next");e.classList.add("animated"),clearTimeout(i),t=e,i=setTimeout(()=>{t.classList.remove("animated"),n.stepNext()},1500)})})}),$(".js-tx-auto-height").on("keyup paste",function(){var e=$(this),t=e.innerHeight()-e.height();e.innerHeight()<this.scrollHeight||e.height(1),e.height(this.scrollHeight-t)}),document.querySelectorAll(".js-share"));0<p.length&&(p.forEach(e=>{e.addEventListener("click",()=>e.classList.toggle("active"))}),window.addEventListener("click",t=>{t.target.matches(".js-share")||p.forEach(e=>{t.target.matches(".js-buffer-copy")?e.classList.add("active"):e.classList.remove("active")})})),document.querySelectorAll(".js-buffer-copy").forEach(e=>{e.addEventListener("click",e=>{var t=e.currentTarget.querySelector("input"),e=e.currentTarget.querySelector(".btn-icon__share-text");t.select(),e.textContent="Copied",document.execCommand("copy")})}),document.querySelectorAll(".js-btn-icon").forEach(t=>{const n="dislike"===t.dataset.icon,i="like"===t.dataset.icon;var e=t.closest(".main-content__footer-user-evt");const s=e.querySelector('[data-icon="dislike"]'),r=e.querySelector('[data-icon="like"]');let o=Number(r.dataset.count);i&&t.insertAdjacentHTML("beforeend",'<span class="btn-icon__text"></span>');const a=r.querySelector(".btn-icon__text"),l=o<1e3;var e=String(o).slice(0,-2),c=e.length,e=l?o:String(o).slice(0,-3)+`,${e[c-1]} k`;const d=0<o?e:"";a.textContent=d,t.addEventListener("click",e=>{t.classList.toggle("active"),i&&s.classList.remove("active"),n&&r.classList.contains("active")&&(r.classList.remove("active"),a.textContent=d),i&&(r.classList.contains("active")?a.textContent=l?o+1:d:a.textContent=d)})})});